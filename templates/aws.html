{% extends "base.html" %}

{% block title %}AWS - Amazon Web Services{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header bg-warning text-dark">
                <h4><i class="fab fa-aws"></i> Amazon Web Services (AWS)</h4>
                <p class="mb-0">Comprehensive cloud computing platform with extensive service portfolio</p>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5>AWS Services by Category</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <h6><i class="fas fa-server text-primary"></i> Compute</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-light text-dark me-2">EC2</span> Virtual Servers</li>
                            <li><span class="badge bg-light text-dark me-2">Lambda</span> Serverless Functions</li>
                            <li><span class="badge bg-light text-dark me-2">ECS</span> Container Service</li>
                            <li><span class="badge bg-light text-dark me-2">EKS</span> Kubernetes Service</li>
                        </ul>
                    </div>
                    <div class="col-md-6 mb-3">
                        <h6><i class="fas fa-database text-success"></i> Storage & Database</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-light text-dark me-2">S3</span> Object Storage</li>
                            <li><span class="badge bg-light text-dark me-2">RDS</span> Relational Database</li>
                            <li><span class="badge bg-light text-dark me-2">DynamoDB</span> NoSQL Database</li>
                            <li><span class="badge bg-light text-dark me-2">EBS</span> Block Storage</li>
                        </ul>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <h6><i class="fas fa-network-wired text-info"></i> Networking</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-light text-dark me-2">VPC</span> Virtual Private Cloud</li>
                            <li><span class="badge bg-light text-dark me-2">CloudFront</span> CDN</li>
                            <li><span class="badge bg-light text-dark me-2">Route53</span> DNS Service</li>
                            <li><span class="badge bg-light text-dark me-2">ALB</span> Load Balancer</li>
                        </ul>
                    </div>
                    <div class="col-md-6 mb-3">
                        <h6><i class="fas fa-shield-alt text-danger"></i> Security</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-light text-dark me-2">IAM</span> Identity Management</li>
                            <li><span class="badge bg-light text-dark me-2">KMS</span> Key Management</li>
                            <li><span class="badge bg-light text-dark me-2">Cognito</span> User Authentication</li>
                            <li><span class="badge bg-light text-dark me-2">WAF</span> Web Application Firewall</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5>Quick Actions</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="{{ url_for('terraform_page') }}" class="btn btn-primary">
                        <i class="fas fa-layer-group"></i> Generate Terraform
                    </a>
                    <a href="{{ url_for('sdk_examples') }}" class="btn btn-success">
                        <i class="fas fa-code"></i> boto3 Examples
                    </a>
                    <a href="{{ url_for('query_agent') }}" class="btn btn-info">
                        <i class="fas fa-question-circle"></i> Ask Agent
                    </a>
                </div>
                
                <hr>
                
                <h6>Popular Use Cases</h6>
                <div class="list-group list-group-flush">
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('web_application')">
                        <i class="fas fa-globe me-2"></i>Web Applications
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('api_backend')">
                        <i class="fas fa-server me-2"></i>API Backends
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('data_processing')">
                        <i class="fas fa-database me-2"></i>Data Processing
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('machine_learning')">
                        <i class="fas fa-brain me-2"></i>Machine Learning
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5>Common AWS CLI Commands</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>EC2 Management</h6>
                        <pre><code class="language-bash"># List instances
aws ec2 describe-instances

# Start instance
aws ec2 start-instances --instance-ids i-1234567890abcdef0

# Stop instance
aws ec2 stop-instances --instance-ids i-1234567890abcdef0</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6>S3 Operations</h6>
                        <pre><code class="language-bash"># List buckets
aws s3 ls

# Upload file
aws s3 cp file.txt s3://mybucket/

# Sync directory
aws s3 sync ./local-folder s3://mybucket/remote-folder</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="useCaseResults" class="mt-4" style="display: none;">
    <div class="card">
        <div class="card-header">
            <h5 id="useCaseTitle">Use Case Recommendations</h5>
        </div>
        <div class="card-body" id="useCaseContent">
            <!-- Content loaded dynamically -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function loadUseCaseRecs(useCase) {
    const resultsDiv = document.getElementById('useCaseResults');
    const titleEl = document.getElementById('useCaseTitle');
    const contentEl = document.getElementById('useCaseContent');
    
    titleEl.textContent = `AWS Recommendations for ${useCase.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())}`;
    contentEl.innerHTML = '<div class="text-center"><div class="spinner-border" role="status"></div></div>';
    resultsDiv.style.display = 'block';
    
    fetch(`/recommendations/${useCase}`)
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                contentEl.innerHTML = `<div class="alert alert-danger">${data.error}</div>`;
                return;
            }
            
            let html = '<div class="row">';
            
            if (data.aws && data.aws.length > 0) {
                html += '<div class="col-12"><h6><i class="fab fa-aws text-warning"></i> AWS Services</h6><ul>';
                data.aws.forEach(rec => {
                    html += `<li><i class="fas fa-check text-success me-2"></i>${rec}</li>`;
                });
                html += '</ul></div>';
            }
            
            html += '</div>';
            contentEl.innerHTML = html;
        })
        .catch(error => {
            contentEl.innerHTML = `<div class="alert alert-danger">Failed to load recommendations: ${error.message}</div>`;
        });
}
</script>
{% endblock %}