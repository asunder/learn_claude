{% extends "base.html" %}

{% block title %}Azure - Microsoft Azure{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h4><i class="fab fa-microsoft"></i> Microsoft Azure</h4>
                <p class="mb-0">Microsoft's comprehensive cloud computing platform and services</p>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5>Azure Services by Category</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <h6><i class="fas fa-server text-primary"></i> Compute</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-light text-dark me-2">VMs</span> Virtual Machines</li>
                            <li><span class="badge bg-light text-dark me-2">Functions</span> Serverless Computing</li>
                            <li><span class="badge bg-light text-dark me-2">ACI</span> Container Instances</li>
                            <li><span class="badge bg-light text-dark me-2">AKS</span> Kubernetes Service</li>
                        </ul>
                    </div>
                    <div class="col-md-6 mb-3">
                        <h6><i class="fas fa-database text-success"></i> Storage & Database</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-light text-dark me-2">Storage</span> Blob, File, Queue</li>
                            <li><span class="badge bg-light text-dark me-2">SQL DB</span> SQL Database</li>
                            <li><span class="badge bg-light text-dark me-2">Cosmos DB</span> NoSQL Database</li>
                            <li><span class="badge bg-light text-dark me-2">Disks</span> Managed Disks</li>
                        </ul>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <h6><i class="fas fa-network-wired text-info"></i> Networking</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-light text-dark me-2">VNet</span> Virtual Network</li>
                            <li><span class="badge bg-light text-dark me-2">CDN</span> Content Delivery</li>
                            <li><span class="badge bg-light text-dark me-2">DNS</span> DNS Service</li>
                            <li><span class="badge bg-light text-dark me-2">Load Balancer</span> Traffic Distribution</li>
                        </ul>
                    </div>
                    <div class="col-md-6 mb-3">
                        <h6><i class="fas fa-shield-alt text-danger"></i> Security</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-light text-dark me-2">AD</span> Active Directory</li>
                            <li><span class="badge bg-light text-dark me-2">Key Vault</span> Secret Management</li>
                            <li><span class="badge bg-light text-dark me-2">Security Center</span> Threat Protection</li>
                            <li><span class="badge bg-light text-dark me-2">Sentinel</span> SIEM Solution</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5>Quick Actions</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="{{ url_for('terraform_page') }}" class="btn btn-primary">
                        <i class="fas fa-layer-group"></i> Generate Terraform
                    </a>
                    <a href="{{ url_for('sdk_examples') }}" class="btn btn-success">
                        <i class="fas fa-code"></i> Azure SDK Examples
                    </a>
                    <a href="{{ url_for('query_agent') }}" class="btn btn-info">
                        <i class="fas fa-question-circle"></i> Ask Agent
                    </a>
                </div>
                
                <hr>
                
                <h6>Popular Use Cases</h6>
                <div class="list-group list-group-flush">
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('web_application')">
                        <i class="fas fa-globe me-2"></i>Web Applications
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('api_backend')">
                        <i class="fas fa-server me-2"></i>API Backends
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('data_processing')">
                        <i class="fas fa-database me-2"></i>Data Processing
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('machine_learning')">
                        <i class="fas fa-brain me-2"></i>Machine Learning
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5>Common Azure CLI Commands</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>VM Management</h6>
                        <pre><code class="language-bash"># List VMs
az vm list

# Start VM
az vm start --name MyVM --resource-group MyRG

# Stop VM
az vm stop --name MyVM --resource-group MyRG</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6>Storage Operations</h6>
                        <pre><code class="language-bash"># List storage accounts
az storage account list

# Upload blob
az storage blob upload --file myfile.txt --name myblob --account-name mystorageaccount

# List containers
az storage container list --account-name mystorageaccount</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="useCaseResults" class="mt-4" style="display: none;">
    <div class="card">
        <div class="card-header">
            <h5 id="useCaseTitle">Use Case Recommendations</h5>
        </div>
        <div class="card-body" id="useCaseContent">
            <!-- Content loaded dynamically -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function loadUseCaseRecs(useCase) {
    const resultsDiv = document.getElementById('useCaseResults');
    const titleEl = document.getElementById('useCaseTitle');
    const contentEl = document.getElementById('useCaseContent');
    
    titleEl.textContent = `Azure Recommendations for ${useCase.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())}`;
    contentEl.innerHTML = '<div class="text-center"><div class="spinner-border" role="status"></div></div>';
    resultsDiv.style.display = 'block';
    
    fetch(`/recommendations/${useCase}`)
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                contentEl.innerHTML = `<div class="alert alert-danger">${data.error}</div>`;
                return;
            }
            
            let html = '<div class="row">';
            
            if (data.azure && data.azure.length > 0) {
                html += '<div class="col-12"><h6><i class="fab fa-microsoft text-primary"></i> Azure Services</h6><ul>';
                data.azure.forEach(rec => {
                    html += `<li><i class="fas fa-check text-success me-2"></i>${rec}</li>`;
                });
                html += '</ul></div>';
            }
            
            html += '</div>';
            contentEl.innerHTML = html;
        })
        .catch(error => {
            contentEl.innerHTML = `<div class="alert alert-danger">Failed to load recommendations: ${error.message}</div>`;
        });
}
</script>
{% endblock %}