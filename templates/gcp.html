{% extends "base.html" %}

{% block title %}GCP - Google Cloud Platform{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header bg-danger text-white">
                <h4><i class="fab fa-google"></i> Google Cloud Platform (GCP)</h4>
                <p class="mb-0">Google's suite of cloud computing services and infrastructure</p>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5>GCP Services by Category</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <h6><i class="fas fa-server text-primary"></i> Compute</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-light text-dark me-2">Compute Engine</span> Virtual Machines</li>
                            <li><span class="badge bg-light text-dark me-2">Cloud Functions</span> Serverless Functions</li>
                            <li><span class="badge bg-light text-dark me-2">Cloud Run</span> Containerized Apps</li>
                            <li><span class="badge bg-light text-dark me-2">GKE</span> Kubernetes Engine</li>
                        </ul>
                    </div>
                    <div class="col-md-6 mb-3">
                        <h6><i class="fas fa-database text-success"></i> Storage & Database</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-light text-dark me-2">Cloud Storage</span> Object Storage</li>
                            <li><span class="badge bg-light text-dark me-2">Cloud SQL</span> Relational Database</li>
                            <li><span class="badge bg-light text-dark me-2">Firestore</span> NoSQL Database</li>
                            <li><span class="badge bg-light text-dark me-2">Persistent Disk</span> Block Storage</li>
                        </ul>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <h6><i class="fas fa-network-wired text-info"></i> Networking</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-light text-dark me-2">VPC</span> Virtual Private Cloud</li>
                            <li><span class="badge bg-light text-dark me-2">Cloud CDN</span> Content Delivery</li>
                            <li><span class="badge bg-light text-dark me-2">Cloud DNS</span> DNS Service</li>
                            <li><span class="badge bg-light text-dark me-2">Load Balancing</span> Traffic Distribution</li>
                        </ul>
                    </div>
                    <div class="col-md-6 mb-3">
                        <h6><i class="fas fa-shield-alt text-danger"></i> Security</h6>
                        <ul class="list-unstyled">
                            <li><span class="badge bg-light text-dark me-2">IAM</span> Identity & Access</li>
                            <li><span class="badge bg-light text-dark me-2">KMS</span> Key Management</li>
                            <li><span class="badge bg-light text-dark me-2">Security Center</span> Security Command Center</li>
                            <li><span class="badge bg-light text-dark me-2">Certificate Authority</span> PKI Service</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5>Quick Actions</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="{{ url_for('terraform_page') }}" class="btn btn-primary">
                        <i class="fas fa-layer-group"></i> Generate Terraform
                    </a>
                    <a href="{{ url_for('sdk_examples') }}" class="btn btn-success">
                        <i class="fas fa-code"></i> GCP SDK Examples
                    </a>
                    <a href="{{ url_for('query_agent') }}" class="btn btn-info">
                        <i class="fas fa-question-circle"></i> Ask Agent
                    </a>
                </div>
                
                <hr>
                
                <h6>Popular Use Cases</h6>
                <div class="list-group list-group-flush">
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('web_application')">
                        <i class="fas fa-globe me-2"></i>Web Applications
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('api_backend')">
                        <i class="fas fa-server me-2"></i>API Backends
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('data_processing')">
                        <i class="fas fa-database me-2"></i>Data Processing
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('machine_learning')">
                        <i class="fas fa-brain me-2"></i>Machine Learning
                    </a>
                    <a href="#" class="list-group-item list-group-item-action border-0 px-0" onclick="loadUseCaseRecs('container_workloads')">
                        <i class="fas fa-cube me-2"></i>Container Workloads
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5>Common gcloud Commands</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Compute Engine</h6>
                        <pre><code class="language-bash"># List instances
gcloud compute instances list

# Start instance
gcloud compute instances start INSTANCE_NAME --zone=ZONE

# Stop instance
gcloud compute instances stop INSTANCE_NAME --zone=ZONE</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6>Cloud Storage</h6>
                        <pre><code class="language-bash"># List buckets
gsutil ls

# Upload file
gsutil cp file.txt gs://mybucket/

# Sync directory
gsutil rsync -r ./local-dir gs://mybucket/remote-dir</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="useCaseResults" class="mt-4" style="display: none;">
    <div class="card">
        <div class="card-header">
            <h5 id="useCaseTitle">Use Case Recommendations</h5>
        </div>
        <div class="card-body" id="useCaseContent">
            <!-- Content loaded dynamically -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function loadUseCaseRecs(useCase) {
    const resultsDiv = document.getElementById('useCaseResults');
    const titleEl = document.getElementById('useCaseTitle');
    const contentEl = document.getElementById('useCaseContent');
    
    titleEl.textContent = `GCP Recommendations for ${useCase.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())}`;
    contentEl.innerHTML = '<div class="text-center"><div class="spinner-border" role="status"></div></div>';
    resultsDiv.style.display = 'block';
    
    fetch(`/recommendations/${useCase}`)
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                contentEl.innerHTML = `<div class="alert alert-danger">${data.error}</div>`;
                return;
            }
            
            let html = '<div class="row">';
            
            if (data.gcp && data.gcp.length > 0) {
                html += '<div class="col-12"><h6><i class="fab fa-google text-danger"></i> GCP Services</h6><ul>';
                data.gcp.forEach(rec => {
                    html += `<li><i class="fas fa-check text-success me-2"></i>${rec}</li>`;
                });
                html += '</ul></div>';
            }
            
            html += '</div>';
            contentEl.innerHTML = html;
        })
        .catch(error => {
            contentEl.innerHTML = `<div class="alert alert-danger">Failed to load recommendations: ${error.message}</div>`;
        });
}
</script>
{% endblock %}